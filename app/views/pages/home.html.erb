
<%= content_for(:title) do %>
  Home
<% end %>

<%= content_for(:description) do %>
  <%# TODO %>
<% end %>

<div class="banner">
  <% if current_user == @user %>
    <%= render 'pages/home/connected' %>
  <% else %>
  <% end %>
</div>

<input name="Tournament" placeholder="Cherchez un tournoi par nom, ville, addresse, dates..." id="tournament" />

<% content_for(:after_js) do %>
<script type="text/javascript">
  $(document).ready(function() {
    var client = new AlgoliaSearch("<%=ENV["ALGOLIA_APPLICATION_ID"]%>", "<%=ENV["ALGOLIA_SEARCH_ONLY_API_KEY"]%>");
    // var template = Hogan.compile('{{{_highlightResult.email.value}}} ({{{_highlightResult.first_name.value}}} {{{_highlightResult.last_name.value}}})');
    $('#tournament').typeahead(null, {
      source: client.initIndex('<%= Tournament.index_name %>').ttAdapter(),
      displayKey: 'address',
      templates: {
        suggestion: function(hit) {
          return "<div>" + hit._highlightResult.address.value + "<small>" + hit._highlightResult.address.value + "<small></div>";
        }
      }
    });
  });
</script>
<%end%>