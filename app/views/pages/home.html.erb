
<%= content_for(:title) do %>
  Home
<% end %>

<%= content_for(:description) do %>
  <%# TODO %>
<% end %>

<div class="banner">
  <% if current_user == @user %>
    <%= render 'pages/home/connected' %>
  <% else %>
  <% end %>
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-md-5 col-offset-md-4">
        <h1 id="searching-tournament"> Vous cherchez un tournoi ?</h1>
        <form class="form-horizontal" id="algolia-bar">
          <div class="form-group">
            <input name="Tournament" placeholder="Cherchez un tournoi par nom, ville, addresse, dates..." id="tournament"/>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<% content_for(:after_js) do %>
<script type="text/javascript">
  $(document).ready(function() {
    var client = new AlgoliaSearch("<%=ENV["ALGOLIA_APPLICATION_ID"]%>", "<%=ENV["ALGOLIA_SEARCH_ONLY_API_KEY"]%>");
    // var template = Hogan.compile('{{{_highlightResult.email.value}}} ({{{_highlightResult.first_name.value}}} {{{_highlightResult.last_name.value}}})');
    $('#tournament').typeahead(null, {
      source: client.initIndex('<%= Tournament.index_name %>').ttAdapter(),
      displayKey: 'name',
      templates: {
        suggestion: function(hit) {
          console.log(hit);
          return '<div><a href="/tournaments/' + hit.objectID + '">' + hit._highlightResult.name.value + '</a></div>';
        }
      }
    });
  });
</script>
<%end%>