
<%=content_for(:title) do%>
  Home
<%end%>

<%=content_for(:description) do%>
  <%# TODO %>
<%end%>
<div class="max-height">
  <div class="banner">
    <%if current_user.nil? %>
      <%=render 'pages/home/not_connected'%>
    <%else%>
      <%=render 'pages/home/connected'%>
    <%end%>
  </div>
</div>
 <% content_for(:after_js) do %>
<script type="text/javascript">
  $(document).ready(function() {
    var client = new AlgoliaSearch("<%=ENV["ALGOLIA_APPLICATION_ID"]%>", "<%=ENV["ALGOLIA_SEARCH_ONLY_API_KEY"]%>");
    // var template = Hogan.compile('{{{_highlightResult.email.value}}} ({{{_highlightResult.first_name.value}}} {{{_highlightResult.last_name.value}}})');
    $('#tournament').typeahead(null, {
      source: client.initIndex('<%= Tournament.index_name %>').ttAdapter(),
      displayKey: 'name',
      templates: {
        suggestion: function(hit) {
          console.log(hit);
          return '<div><a href="/tournaments/' + hit.objectID + '">' + hit._highlightResult.name.value + '</a></div>';
        }
      }
    });
  });
</script>
<%end%>


